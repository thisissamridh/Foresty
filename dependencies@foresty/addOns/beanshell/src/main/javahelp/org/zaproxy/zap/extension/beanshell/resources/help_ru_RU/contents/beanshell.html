<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>
Консоль BeanShell
</title>
</head>
<body>
<h1>Консоль Bean Shell </h1>
<p>
	BeanShell - это интерактивная оболочка Java, которую можно использовать для выполнения сценариев BeanShell.  Эти
сценарии - это упрощенная форма Java, в которой используются многие элементы синтаксиса Java, но в более простом виде.
формат сценария.  Весь код Java также является допустимым кодом BeanShell. <0 />
Интеграция BeanShell в OWASP ZAP позволяет писать сценарии с использованием функций ZAP и
набор данных.  Это может быть очень мощной функцией для анализа веб-приложений. 
</p>
<h2>Консоль BeanShell</h2>
<p>
	Консоль запускается из меню Инструменты и содержит разделенный экран, верхняя половина которого является
интерактивная консоль BeanShell, а нижняя половина представляет собой простой текстовый редактор.  Для сложных сценариев вы
рекомендуется использовать редактор Java.  Сценарии можно загружать, сохранять и оценивать из редактора. 
	Когда BeanShell запускается, для использования доступны несколько объектов из ZAP, а именно: 
	<ul>
	<li>the <i>Model</i> singleton через объект с именем <i>model</i></li>
	<li>the <i>SiteTree</i> дерево текущих сайтов через<i> сайты</i> объект

</li>
	<li>экземпляр  <pre>HttpSender</pre> сквозь <i>sender</i> объект</li>
	</ul>
	Обратите внимание на то, что BeanShell слабо типизирован.  Следовательно, необязательно объявлять переменные перед
их использование - это делает скрипты немного более лаконичными, чем обычная Java.  Но, конечно, если ты хочешь
определить тип вы можете. 
</p>
<h2>Использование карты сайта </h2>
<p>
	Начнем с чего-то полезного и типичного: перебираем все узлы сайта и проверяем наличие
наличие файла.  Для этого уже создан сценарий, выберите Загрузить и выберите
файл example.tree.bsh.  Перед тем, как нажать «Оценить», сначала перейдите на сайт через ZAP, чтобы заполнить
дерево: 
	<br/><br/>
	Теперь нажмите «Оценить», чтобы выполнить сценарий, находящийся в редакторе. Если ошибок нет, то можно
Теперь начните использовать объект, определенный в скрипте, выполнив следующие команды: 
	<pre>
	t = Tree();
	</pre>
	Которая создает новый объект Tree и назначает ссылку на t. 
	<pre>
	t.find(sites.getRoot(), "index.html");
	</pre>
	Вызовите метод find для t, который принимает SiteNode в качестве первого аргумента и ресурс для поиска в качестве
второй.  В этом случае метод будет перебирать все узлы в дереве, потому что мы начали с
в корне и найдет файлы index.html. 
	<br/><br/>
	Вместо того, чтобы перебирать все узлы, мы могли бы запустить конкретный узел, используя
findChild, например: 
	<br/><br/>
	Это должно дать вам некоторое представление о возможностях BeanShell в ZAP.  Но чтобы полностью использовать это, вы
необходимо ознакомиться с внутренним API и функциями BeanShell.  BeanShell имеет
был настроен таким образом, чтобы обеспечить полный доступ ко всем внутренним объектам и методам, даже к частным. 
</p>
<h2>Простой HTTP-запрос </h2>
<p>
	В следующем примере мы создаем и отправляем HTTP-запрос прямо в интерактивной консоли:
Чтобы в полной мере использовать возможности BeanShell, вам следует ознакомиться с внутренними функциями ZAP. 
	Объект-отправитель - это тот же экземпляр, который используется редактором ручного запроса, и поэтому он будет
автоматически использовать настройки прокси, установленные в конфигурации ZAP. 
	<br/><br/>
	TODO: POST пример
</p>
<h2>Советы</h2>
<p>
	Используйте команду unset (String), чтобы отключить любые объявленные переменные, методы или объекты.  Это полезно, если
вы хотите заменить объявление метода в текущем пространстве имен.  Обратите внимание, что команда принимает
Строковый аргумент, а не объект, поэтому, чтобы отключить объект t, который мы использовали выше, он должен быть: unset («t»); и
не сброшено (t); 
</p>
<p>
	Оригинальный документ: Stephen de Vries
</p>

</body>
</html>
